/**
 * Class : YoutubeController
 * @auther Bhupendra
 * Last Modified By :
 * Last Modified Date :
 * Details: YoutubeController to make callout and retrieve the JSON detail from external system
 * And parsing the JSON responses
 */

public class YoutubeController {
    public String body {set;get;}
    public void search(){
        //business logic
        //End point we have to get from external application
        String endpoint = 'https://youtube.googleapis.com/youtube/v3/search?part=snippet&q=Salesforce&key=AIzaSyBu12VzobayRhJe-CRR0CIe-IQOclmVKww';
        
        //Step1: Instantiate the HTTP Class
        Http http = new Http();
        
        //Step2: Instantiate the HTTP request Class and frame the request
        HttpRequest request = new HttpRequest();
        request.setHeader('Accept','application/json');
        request.setEndpoint(endpoint);
        request.setMethod('GET');
        
        //Step3: Send the request and handle the response
        HttpResponse response = http.send(request);
        //String body = response.getBody(); //here Var is lacal so instead we create instance var
        body = response.getBody();
        
        //Here we are deserializing JSON keys into ApexType/apexProperty
        fromJSON d =(fromJSON)JSON.deserialize(body, fromJSON.class); //we can also instantiate class using .class keyword
        
        System.debug('Kind Data: '+d.kind);
        System.debug('etag Data: '+d.etag);
        System.debug('Fetching cls_id Kind data: '+d.items[0].id.kind);
        System.debug('Fetching cls_snippet description: '+d.items[0].snippet.description);
    }
    
//
//Generated by AdminBooster
//
//Here fromJSON is inner class and we cannot have nested inner classes 
//So we will take out other class
public class fromJSON{
	public String kind;	//youtube#searchListResponse
	public String etag;	//vaf-t62GQflLEuwhDiQKjhZlTOM
	public String nextPageToken;	//CAUQAA
	public String regionCode;	//JP
	public cls_pageInfo pageInfo;
	public cls_items[] items;
	}
 class cls_pageInfo {
		public Integer totalResults;	//1000000
		public Integer resultsPerPage;	//5
	}
	class cls_items {
		public String kind;	//youtube#searchResult
		public String etag;	//812b77z6c9IE-LjJWkhP6zsDx64
		public cls_id id;
		public cls_snippet snippet;
	}
	class cls_id {
		public String kind;	//youtube#channel
		public String channelId;	//UCUpquzY878NEaZm5bc7m2sQ
	}
	class cls_snippet {
		public String publishedAt;	//2006-08-03T21:52:39Z
		public String channelId;	//UCUpquzY878NEaZm5bc7m2sQ
		public String title;	//Salesforce
		public String description;	//Salesforce is the #1 AI CRM, where humans with agents drive customer success together. Through Agentforce, our ...
		public cls_thumbnails thumbnails;
		public String channelTitle;	//Salesforce
		public String liveBroadcastContent;	//none
		public String publishTime;	//2006-08-03T21:52:39Z
	}
	class cls_thumbnails {
		public cls_default default_x;
		public cls_medium medium;
		public cls_high high;
	}
	class cls_default {
		public String url;	//https://yt3.ggpht.com/ZIPvInnj50dYnGYvkanm_IYcoYaofSY47e_4iah-EoCduSdhxYOC_-TCatm9XR3HAp1HJeomAa0=s88-c-k-c0xffffffff-no-rj-mo
	}
	class cls_medium {
		public String url;	//https://yt3.ggpht.com/ZIPvInnj50dYnGYvkanm_IYcoYaofSY47e_4iah-EoCduSdhxYOC_-TCatm9XR3HAp1HJeomAa0=s240-c-k-c0xffffffff-no-rj-mo
	}
	class cls_high {
		public String url;	//https://yt3.ggpht.com/ZIPvInnj50dYnGYvkanm_IYcoYaofSY47e_4iah-EoCduSdhxYOC_-TCatm9XR3HAp1HJeomAa0=s800-c-k-c0xffffffff-no-rj-mo
	}
    
    //You can remove Parse and testParse method
	/*public static fromJSON parse(String json){
		return (fromJSON) System.JSON.deserialize(json, fromJSON.class);
	}*/

	/*static testMethod void testParse() {
		String json=		'{ "kind": "youtube#searchListResponse", "etag": "vaf-t62GQflLEuwhDiQKjhZlTOM", "nextPageToken": "CAUQAA", "regionCode": "JP", "pageInfo": { "totalResults": 1000000, "resultsPerPage": 5 }, "items": [ { "kind": "youtube#searchResult", "etag": "812b77z6c9IE-LjJWkhP6zsDx64", "id": { "kind": "youtube#channel", "channelId": "UCUpquzY878NEaZm5bc7m2sQ" }, "snippet": { "publishedAt": "2006-08-03T21:52:39Z", "channelId": "UCUpquzY878NEaZm5bc7m2sQ", "title": "Salesforce", "description": "Salesforce is the #1 AI CRM, where humans with agents drive customer success together. Through Agentforce, our ...", "thumbnails": { "default": { "url": "https://yt3.ggpht.com/ZIPvInnj50dYnGYvkanm_IYcoYaofSY47e_4iah-EoCduSdhxYOC_-TCatm9XR3HAp1HJeomAa0=s88-c-k-c0xffffffff-no-rj-mo" }, "medium": { "url": "https://yt3.ggpht.com/ZIPvInnj50dYnGYvkanm_IYcoYaofSY47e_4iah-EoCduSdhxYOC_-TCatm9XR3HAp1HJeomAa0=s240-c-k-c0xffffffff-no-rj-mo" }, "high": { "url": "https://yt3.ggpht.com/ZIPvInnj50dYnGYvkanm_IYcoYaofSY47e_4iah-EoCduSdhxYOC_-TCatm9XR3HAp1HJeomAa0=s800-c-k-c0xffffffff-no-rj-mo" } }, "channelTitle": "Salesforce", "liveBroadcastContent": "none", "publishTime": "2006-08-03T21:52:39Z" } }, { "kind": "youtube#searchResult", "etag": "YxbwgCkjQgBH-ha16hAOd1lI6DU", "id": { "kind": "youtube#video", "videoId": "EfK0SURQ8X0" }, "snippet": { "publishedAt": "2023-02-15T14:30:03Z", "channelId": "UCsvqVGtbbyHaMoevxPAq9Fg", "title": "What is Salesforce? | Salesforce in 7 Minutes | Introduction to Salesforce | Simplilearn", "description": "Data Scientist Masters Program (Discount Code - YTBE15) ...", "thumbnails": { "default": { "url": "https://i.ytimg.com/vi/EfK0SURQ8X0/default.jpg", "width": 120, "height": 90 }, "medium": { "url": "https://i.ytimg.com/vi/EfK0SURQ8X0/mqdefault.jpg", "width": 320, "height": 180 }, "high": { "url": "https://i.ytimg.com/vi/EfK0SURQ8X0/hqdefault.jpg", "width": 480, "height": 360 } }, "channelTitle": "Simplilearn", "liveBroadcastContent": "none", "publishTime": "2023-02-15T14:30:03Z" } }, { "kind": "youtube#searchResult", "etag": "ckPFAfoKRx3-OdBNd3AwGxNm8Rs", "id": { "kind": "youtube#video", "videoId": "TUXh42V_ng4" }, "snippet": { "publishedAt": "2024-07-08T15:59:51Z", "channelId": "UCUpquzY878NEaZm5bc7m2sQ", "title": "What is Salesforce? | Salesforce Explained", "description": "What is Salesforce? Salesforce is the #1 AI CRM, helping companies connect with customers in a whole new way since 1999.", "thumbnails": { "default": { "url": "https://i.ytimg.com/vi/TUXh42V_ng4/default.jpg", "width": 120, "height": 90 }, "medium": { "url": "https://i.ytimg.com/vi/TUXh42V_ng4/mqdefault.jpg", "width": 320, "height": 180 }, "high": { "url": "https://i.ytimg.com/vi/TUXh42V_ng4/hqdefault.jpg", "width": 480, "height": 360 } }, "channelTitle": "Salesforce", "liveBroadcastContent": "none", "publishTime": "2024-07-08T15:59:51Z" } }, { "kind": "youtube#searchResult", "etag": "nTAADhkGwDI9FpK1msaLOcT-LLc", "id": { "kind": "youtube#playlist", "playlistId": "PLEiEAq2VkUUK0x8URvIzHZ3_JYTdHxTAd" }, "snippet": { "publishedAt": "2016-05-12T13:40:37Z", "channelId": "UCsvqVGtbbyHaMoevxPAq9Fg", "title": "Salesforce Training Videos For Beginners [2024 Updated]", "description": "Welcome to the \"Ultimate Salesforce Tutorial Playlist\"! Whether you're new to Salesforce or looking to expand your knowledge, ...", "thumbnails": { "default": { "url": "https://i.ytimg.com/vi/f1AMkMQw-p4/default.jpg", "width": 120, "height": 90 }, "medium": { "url": "https://i.ytimg.com/vi/f1AMkMQw-p4/mqdefault.jpg", "width": 320, "height": 180 }, "high": { "url": "https://i.ytimg.com/vi/f1AMkMQw-p4/hqdefault.jpg", "width": 480, "height": 360 } }, "channelTitle": "Simplilearn", "liveBroadcastContent": "none", "publishTime": "2016-05-12T13:40:37Z" } }, { "kind": "youtube#searchResult", "etag": "zJDbP_D8MTrGKaft8nlNCFmOlRc", "id": { "kind": "youtube#video", "videoId": "SlhESAKF1Tk" }, "snippet": { "publishedAt": "2021-03-24T09:00:20Z", "channelId": "UCUpquzY878NEaZm5bc7m2sQ", "title": "What is CRM and How Does it Work? | Salesforce", "description": "What is CRM (Customer Relationship Management) and how does CRM work? Watch this video to see how CRM helps you keep ...", "thumbnails": { "default": { "url": "https://i.ytimg.com/vi/SlhESAKF1Tk/default.jpg", "width": 120, "height": 90 }, "medium": { "url": "https://i.ytimg.com/vi/SlhESAKF1Tk/mqdefault.jpg", "width": 320, "height": 180 }, "high": { "url": "https://i.ytimg.com/vi/SlhESAKF1Tk/hqdefault.jpg", "width": 480, "height": 360 } }, "channelTitle": "Salesforce", "liveBroadcastContent": "none", "publishTime": "2021-03-24T09:00:20Z" } } ] }';
		fromJSON obj = parse(json);
		System.assert(obj != null);
	}*/

}